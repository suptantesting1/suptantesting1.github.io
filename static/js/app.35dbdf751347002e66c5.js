webpackJsonp([3],{"8cFf":function(t,o){},BEqM:function(t,o){},IcnI:function(t,o,n){"use strict";var e=n("/5sW"),r=n("NYxO"),a=n("mvHQ"),c=n.n(a),i=n("Xxa5"),s=n.n(i),u=n("Dd8w"),f=n.n(u),m=n("exGp"),d=n.n(m),b=n("y3TV"),l=n.n(b);var p,k={debug:function(t,o){console.log(t,c()(o)||"")},error:function(t){console.log(t)}},O=n("//Fk"),_=n.n(O),E=Object({NODE_ENV:"production",PROXY_URL:"https://cors-anywhere.herokuapp.com/",ENABLED_PROXY:"ON",RESOURCE_URL:"https://json-bin.netlify.com/books.json"}),T=(E.ALLOW_LOG_LEVEL,E.NODE_ENV,E.PROXY_URL),C=E.ENABLED_PROXY,h=E.RESOURCE_URL,R=(p=d()(s.a.mark(function t(o){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new _.a(function(t,n){fetch(v(o),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(t){return console.log(t),t.ok?t.json():n({status:t.status})}).then(function(o){return console.log(o),t(o)}).catch(function(t){return n(new Error("GET "+o+" "+t.message))})}));case 1:case"end":return t.stop()}},t,this)})),function(t){return p.apply(this,arguments)});function v(t){return"ON"===C?T+t:t}var A=this,B=function(){var t=d()(s.a.mark(function t(){var o,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return k.debug("Start fetch books info."),t.next=3,R(h);case 3:return o=t.sent,k.debug("Done fetch books info."),k.debug("Start Transform books info."),n=l()(o,"books",[]).map(function(t){return f()({},t,{price:+t.price})}),k.debug("Done Transform books info."),t.abrupt("return",n);case 9:case"end":return t.stop()}},t,A)}));return function(){return t.apply(this,arguments)}}(),g={namespaced:!0,state:{books:[],displayBooks:[],isFetchBooks:!1},actions:{getBooks:function(t){return t.commit("SET_IS_FETCH_BOOK",!0),B().then(function(o){k.debug("Fetch books success"),t.commit("SET_IS_FETCH_BOOK",!1),t.commit("BOOKS_UPDATED",o),t.commit("FILTER_BOOKS","")}).catch(function(o){k.error(c()(o)),t.commit("SET_IS_FETCH_BOOK",!1)})},filterBooks:function(t,o){var n=t.commit;k.debug("Filter books from the given input "+o),n("FILTER_BOOKS",o)}},getters:{books:function(t){return t.books},displayBooks:function(t){return t.displayBooks},isFetchBooks:function(t){return t.isFetchBooks}},mutations:{BOOKS_UPDATED:function(t,o){t.books=o},FILTER_BOOKS:function(t,o){if(o&&0!==o.length){var n=o.toLowerCase(),e=t.books.filter(function(t){return t.title.toLowerCase().includes(n)});t.displayBooks=e}else t.displayBooks=t.books},SET_IS_FETCH_BOOK:function(t,o){t.isFetchBooks=o}}},L={addBookToCart:function(t,o){var n=t.commit;k.debug("Add book to cart"),n("ADD_TO_CART",o),n("CALCULATE_DISCOUNT")},removeBookFromCart:function(t,o){var n=t.commit;k.debug("Remove book from cart"),n("REMOVE_FROM_CART",o),n("CALCULATE_DISCOUNT")},decreaseBookInCart:function(t,o){var n=t.commit;k.debug("Decrease book in cart"),n("DECREASE_BOOK_IN_CART",o),n("CALCULATE_DISCOUNT")},increaseBookInCart:function(t,o){var n=t.commit;k.debug("Increase book in cart"),n("INCREASE_BOOK_IN_CART",o),n("CALCULATE_DISCOUNT")},clearCart:function(t){var o=t.commit;k.debug("Clear items in cart"),o("CLEAR_CART")}},I={cart:function(t){return t.cart},item:function(t){return t.cart.item}},S=n("fZjL"),D=n.n(S),y=n("pFYg"),F=n.n(y),N=[0,10,11,12,13,14,15],w={namespaced:!0,state:{cart:{item:{books:[]},subTotal:0,total:0,discount:{books:{harry:{}},amount:0}}},actions:L,getters:I,mutations:{ADD_TO_CART:function(t,o){var n=t.cart.item.books.map(function(t){return t.id}).indexOf(o.id),r=n>-1?t.cart.item.books[n]:f()({},o),a=r.price;r.amount=r.amount+1||1,r.total=r.total+a||a,-1===n?(t.cart.item.books.push(r),o.title.includes("Harry Potter")&&(t.cart.discount.books.harry[o.id]=o.price)):e.a.set(t.cart.item.books,n,r),t.cart.subTotal+=a},REMOVE_FROM_CART:function(t,o){var n=t.cart.item.books.map(function(t){return t.id}).indexOf(o);if(!(n<0)){k.debug("Found book to remove from cart");var e=t.cart.item.books.splice(n,1)[0];"object"===F()(l()(t,["cart","discount","books","harry"]))&&delete t.cart.discount.books.harry[e.id],t.cart.subTotal-=e.total}},DECREASE_BOOK_IN_CART:function(t,o){var n=t.cart.item.books.map(function(t){return t.id}).indexOf(o),r=t.cart.item.books[n];!r||r.amount<1||(r.amount-=1,r.total-=r.price,e.a.set(t.cart.item.books,n,r),t.cart.subTotal-=r.price)},INCREASE_BOOK_IN_CART:function(t,o){var n=t.cart.item.books.map(function(t){return t.id}).indexOf(o),r=t.cart.item.books[n];r&&(r.amount+=1,r.total+=r.price,e.a.set(t.cart.item.books,n,r),t.cart.subTotal+=r.price)},EDIT_BOOK_CART:function(t,o){var n=t.books,e=n.indexOf(o);e>-1&&(n[e]=o)},CLEAR_CART:function(t){t.cart={item:{books:[]},subTotal:0,total:0,discount:{books:{harry:{}},amount:0}}},CALCULATE_DISCOUNT:function(t){var o=t.cart,n=o.subTotal,e=o.discount.books.harry;if(e&&"object"===(void 0===e?"undefined":F()(e))){var r=D()(e),a=r.reduce(function(t,o){return t+e[o]},0),c=0;r.length>0&&(c=a*(N[r.length-1]/100));var i=n-c;t.cart.total=i,t.cart.discount.amount=c}}}};e.a.use(r.a);o.a=new r.a.Store({modules:{products:g,carts:w}})},NHnr:function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=n("/5sW"),r=n("7VfX"),a=n.n(r),c=(n("8cFf"),{name:"App",created:function(){console.log("I was born here")},mounted:function(){console.log("I was render here")},beforeDestroy:function(){console.log("This is my last word")}}),i={render:function(){var t=this.$createElement,o=this._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")(c,i,!1,function(t){n("BEqM")},null,null).exports,u=n("YaEn"),f=n("IcnI");e.a.config.productionTip=!1,e.a.use(a.a),new e.a({el:"#app",router:u.a,store:f.a,render:function(t){return t(s)}})},YaEn:function(t,o,n){"use strict";var e=n("/5sW"),r=n("/ocq");e.a.use(r.a);var a=[{path:"/",name:"HomeView",component:function(){return n.e(0).then(n.bind(null,"j7e0"))}},{path:"/payment",name:"PaymentView",component:function(){return n.e(1).then(n.bind(null,"TxOz"))}}];o.a=new r.a({mode:"history",routes:a})}},["NHnr"]);
//# sourceMappingURL=app.35dbdf751347002e66c5.js.map