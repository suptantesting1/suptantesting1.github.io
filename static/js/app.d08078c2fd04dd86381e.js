webpackJsonp([5],{"8cFf":function(t,n){},BEqM:function(t,n){},IcnI:function(t,n,o){"use strict";var e=o("/5sW"),r=o("NYxO"),a=o("mvHQ"),c=o.n(a),i=o("Xxa5"),u=o.n(i),s=o("Dd8w"),f=o.n(s),m=o("exGp"),d=o.n(m),l=o("y3TV"),b=o.n(l),p=Object({NODE_ENV:"production",PROXY_URL:"https://cors-anywhere.herokuapp.com/",RESOURCE_URL:"https://json-bin.netlify.com/books.json"}),_=p.ALLOW_LOG_LEVEL,k=(p.NODE_ENV,p.PROXY_URL),h=(p.ENABLED_PROXY,p.RESOURCE_URL);var E,T={debug:function(t,n){"debug"===_&&console.log(t,n||"")},error:function(t){console.log(t)}},O=o("//Fk"),C=o.n(O),A=(E=d()(u.a.mark(function t(n){var o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o={method:"GET",headers:{"Content-Type":"application/json"}},t.abrupt("return",new C.a(function(t,e){fetch(n,o).then(function(t){return T.debug(t),t.ok?t.json():e({status:t.status})}).then(function(n){return T.debug(n),t(n)}).catch(function(r){T.debug("Retry Fetch data",r),fetch(v(n),o).then(function(t){return t.ok?t.json():e({status:t.status})}).then(function(n){return t(n)}).catch(function(t){return e(new Error("GET "+n+" "+t.message))})})}));case 2:case"end":return t.stop()}},t,this)})),function(t){return E.apply(this,arguments)});function v(t){return k+t}var R=this,g=function(){var t=d()(u.a.mark(function t(){var n,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.debug("Start fetch books info."),t.next=3,A(h);case 3:return n=t.sent,T.debug("Done fetch books info."),T.debug("Start Transform books info."),o=b()(n,"books",[]).map(function(t){return f()({},t,{price:+t.price})}),T.debug("Done Transform books info."),t.abrupt("return",o);case 9:case"end":return t.stop()}},t,R)}));return function(){return t.apply(this,arguments)}}(),B={namespaced:!0,state:{books:[],displayBooks:[],isFetchBooks:!1},actions:{getBooks:function(t){return t.commit("SET_IS_FETCH_BOOK",!0),g().then(function(n){T.debug("Fetch books success"),t.commit("SET_IS_FETCH_BOOK",!1),t.commit("BOOKS_UPDATED",n),t.commit("FILTER_BOOKS","")}).catch(function(n){T.error(c()(n)),t.commit("SET_IS_FETCH_BOOK",!1)})},filterBooks:function(t,n){var o=t.commit;T.debug("Filter books from the given input "+n),o("FILTER_BOOKS",n)}},getters:{books:function(t){return t.books},displayBooks:function(t){return t.displayBooks},isFetchBooks:function(t){return t.isFetchBooks}},mutations:{BOOKS_UPDATED:function(t,n){t.books=n},FILTER_BOOKS:function(t,n){if(n&&0!==n.length){var o=n.toLowerCase(),e=t.books.filter(function(t){return t.title.toLowerCase().includes(o)});t.displayBooks=e}else t.displayBooks=t.books},SET_IS_FETCH_BOOK:function(t,n){t.isFetchBooks=n}}},S={addBookToCart:function(t,n){var o=t.commit;T.debug("Add book to cart"),o("ADD_TO_CART",n),o("CALCULATE_DISCOUNT")},removeBookFromCart:function(t,n){var o=t.commit;T.debug("Remove book from cart"),o("REMOVE_FROM_CART",n),o("CALCULATE_DISCOUNT")},decreaseBookInCart:function(t,n){var o=t.commit;T.debug("Decrease book in cart"),o("DECREASE_BOOK_IN_CART",n),o("CALCULATE_DISCOUNT")},increaseBookInCart:function(t,n){var o=t.commit;T.debug("Increase book in cart"),o("INCREASE_BOOK_IN_CART",n),o("CALCULATE_DISCOUNT")},clearCart:function(t){var n=t.commit;T.debug("Clear items in cart"),n("CLEAR_CART")},updateChange:function(t,n){(0,t.commit)("UPDATE_CHANGE",n)},updateCash:function(t,n){(0,t.commit)("UPDATE_CASH",n)}},L={cart:function(t){return t.cart},item:function(t){return t.cart.item}},D=o("fZjL"),I=o.n(D),y=o("pFYg"),F=o.n(y),U=[0,10,11,12,13,14,15],N={namespaced:!0,state:{cart:{item:{books:[]},subTotal:0,total:0,change:0,cash:0,discount:{books:{harry:{}},amount:0}}},actions:S,getters:L,mutations:{ADD_TO_CART:function(t,n){var o=t.cart.item.books.map(function(t){return t.id}).indexOf(n.id),r=o>-1?t.cart.item.books[o]:f()({},n),a=r.price;r.amount=r.amount+1||1,r.total=r.total+a||a,-1===o?(t.cart.item.books.push(r),n.title.includes("Harry Potter")&&(t.cart.discount.books.harry[n.id]=n.price)):e.a.set(t.cart.item.books,o,r),t.cart.subTotal+=a},REMOVE_FROM_CART:function(t,n){var o=t.cart.item.books.map(function(t){return t.id}).indexOf(n);if(!(o<0)){T.debug("Found book to remove from cart");var e=t.cart.item.books.splice(o,1)[0];"object"===F()(b()(t,["cart","discount","books","harry"]))&&delete t.cart.discount.books.harry[e.id],t.cart.subTotal-=e.total}},DECREASE_BOOK_IN_CART:function(t,n){var o=t.cart.item.books.map(function(t){return t.id}).indexOf(n),r=t.cart.item.books[o];!r||r.amount<1||(r.amount-=1,r.total-=r.price,e.a.set(t.cart.item.books,o,r),t.cart.subTotal-=r.price)},INCREASE_BOOK_IN_CART:function(t,n){var o=t.cart.item.books.map(function(t){return t.id}).indexOf(n),r=t.cart.item.books[o];r&&(r.amount+=1,r.total+=r.price,e.a.set(t.cart.item.books,o,r),t.cart.subTotal+=r.price)},EDIT_BOOK_CART:function(t,n){},CLEAR_CART:function(t){t.cart={item:{books:[]},subTotal:0,total:0,change:0,cash:0,discount:{books:{harry:{}},amount:0}}},CALCULATE_DISCOUNT:function(t){var n=t.cart,o=n.subTotal,e=n.discount.books.harry;if(e&&"object"===(void 0===e?"undefined":F()(e))){var r=I()(e),a=r.reduce(function(t,n){return t+e[n]},0),c=0;r.length>0&&(c=a*(U[r.length-1]/100));var i=o-c;t.cart.total=i,t.cart.discount.amount=c}},UPDATE_CHANGE:function(t,n){t.cart.change=n},UPDATE_CASH:function(t,n){t.cart.cash=n}}};e.a.use(r.a);n.a=new r.a.Store({modules:{products:B,carts:N}})},NHnr:function(t,n,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=o("/5sW"),r=o("7VfX"),a=o.n(r),c=(o("8cFf"),{render:function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{class:""+t.$options.name},[o("ul",t._l(t.items,function(n){return o("li",{key:n.id},[t._v("\n        "+t._s(n.title)+"\n        "),n.amount?o("span",[t._v("("+t._s(n.amount)+")")]):t._e()])}))])},staticRenderFns:[]}),i=o("VU/8")({props:["items"]},c,!1,null,null,null).exports,u={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var s=o("VU/8")({name:"App"},u,!1,function(t){o("BEqM")},null,null).exports,f=o("YaEn"),m=o("IcnI");e.a.config.productionTip=!1,e.a.use(a.a),e.a.dialog.registerComponent("cash-receipt",i),new e.a({el:"#app",router:f.a,store:m.a,render:function(t){return t(s)}})},YaEn:function(t,n,o){"use strict";var e=o("/5sW"),r=o("/ocq");e.a.use(r.a);var a=[{path:"/",name:"HomeView",component:function(){return Promise.all([o.e(1),o.e(0)]).then(o.bind(null,"j7e0"))}},{path:"/payment",name:"PaymentView",component:function(){return Promise.all([o.e(2),o.e(0)]).then(o.bind(null,"TxOz"))}},{path:"/thank-you",name:"ThankYouView",component:function(){return Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"Rb0S"))}}];n.a=new r.a({mode:"history",routes:a})}},["NHnr"]);
//# sourceMappingURL=app.d08078c2fd04dd86381e.js.map