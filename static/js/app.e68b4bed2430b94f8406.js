webpackJsonp([5],{"8cFf":function(t,o){},BEqM:function(t,o){},IcnI:function(t,o,n){"use strict";var e=n("/5sW"),r=n("NYxO"),a=n("mvHQ"),c=n.n(a),i=n("Xxa5"),u=n.n(i),s=n("Dd8w"),f=n.n(s),m=n("exGp"),d=n.n(m),b=n("y3TV"),p=n.n(b),l=Object({NODE_ENV:"production",PROXY_URL:"https://cors-anywhere.herokuapp.com/",RESOURCE_URL:"https://json-bin.netlify.com/books.json"}),k=l.ALLOW_LOG_LEVEL,_=(l.NODE_ENV,l.PROXY_URL),E=(l.ENABLED_PROXY,l.RESOURCE_URL);var h,T={debug:function(t,o){"debug"===k&&console.log(t,o||"")},error:function(t){console.log(t)}},O=n("//Fk"),C=n.n(O),A=(h=d()(u.a.mark(function t(o){var n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"GET",headers:{"Content-Type":"application/json"}},t.abrupt("return",new C.a(function(t,e){fetch(o,n).then(function(t){return T.debug(t),t.ok?t.json():e({status:t.status})}).then(function(o){return T.debug(o),t(o)}).catch(function(r){T.debug("Retry Fetch data",r),fetch(R(o),n).then(function(t){return t.ok?t.json():e({status:t.status})}).then(function(o){return t(o)}).catch(function(t){return e(new Error("GET "+o+" "+t.message))})})}));case 2:case"end":return t.stop()}},t,this)})),function(t){return h.apply(this,arguments)});function R(t){return _+t}var v=this,g=function(){var t=d()(u.a.mark(function t(){var o,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return T.debug("Start fetch books info."),t.next=3,A(E);case 3:return o=t.sent,T.debug("Done fetch books info."),T.debug("Start Transform books info."),n=p()(o,"books",[]).map(function(t){return f()({},t,{price:+t.price})}),T.debug("Done Transform books info."),t.abrupt("return",n);case 9:case"end":return t.stop()}},t,v)}));return function(){return t.apply(this,arguments)}}(),B={namespaced:!0,state:{books:[],displayBooks:[],isFetchBooks:!1},actions:{getBooks:function(t){return t.commit("SET_IS_FETCH_BOOK",!0),g().then(function(o){T.debug("Fetch books success"),t.commit("SET_IS_FETCH_BOOK",!1),t.commit("BOOKS_UPDATED",o),t.commit("FILTER_BOOKS","")}).catch(function(o){T.error(c()(o)),t.commit("SET_IS_FETCH_BOOK",!1)})},filterBooks:function(t,o){var n=t.commit;T.debug("Filter books from the given input "+o),n("FILTER_BOOKS",o)}},getters:{books:function(t){return t.books},displayBooks:function(t){return t.displayBooks},isFetchBooks:function(t){return t.isFetchBooks}},mutations:{BOOKS_UPDATED:function(t,o){t.books=o},FILTER_BOOKS:function(t,o){if(o&&0!==o.length){var n=o.toLowerCase(),e=t.books.filter(function(t){return t.title.toLowerCase().includes(n)});t.displayBooks=e}else t.displayBooks=t.books},SET_IS_FETCH_BOOK:function(t,o){t.isFetchBooks=o}}},S={addBookToCart:function(t,o){var n=t.commit;T.debug("Add book to cart"),n("ADD_TO_CART",o),n("CALCULATE_DISCOUNT")},removeBookFromCart:function(t,o){var n=t.commit;T.debug("Remove book from cart"),n("REMOVE_FROM_CART",o),n("CALCULATE_DISCOUNT")},decreaseBookInCart:function(t,o){var n=t.commit;T.debug("Decrease book in cart"),n("DECREASE_BOOK_IN_CART",o),n("CALCULATE_DISCOUNT")},increaseBookInCart:function(t,o){var n=t.commit;T.debug("Increase book in cart"),n("INCREASE_BOOK_IN_CART",o),n("CALCULATE_DISCOUNT")},clearCart:function(t){var o=t.commit;T.debug("Clear items in cart"),o("CLEAR_CART")},updateChange:function(t,o){(0,t.commit)("UPDATE_CHANGE",o)},updateCash:function(t,o){(0,t.commit)("UPDATE_CASH",o)}},L={cart:function(t){return t.cart},item:function(t){return t.cart.item}},D=n("fZjL"),I=n.n(D),y=n("pFYg"),F=n.n(y),U=[0,10,11,12,13,14,15],N={namespaced:!0,state:{cart:{item:{books:[]},subTotal:0,total:0,change:0,cash:0,discount:{books:{harry:{}},amount:0}}},actions:S,getters:L,mutations:{ADD_TO_CART:function(t,o){var n=t.cart.item.books.map(function(t){return t.id}).indexOf(o.id),r=n>-1?t.cart.item.books[n]:f()({},o),a=r.price;r.amount=r.amount+1||1,r.total=r.total+a||a,-1===n?(t.cart.item.books.push(r),o.title.includes("Harry Potter")&&(t.cart.discount.books.harry[o.id]=o.price)):e.a.set(t.cart.item.books,n,r),t.cart.subTotal+=a},REMOVE_FROM_CART:function(t,o){var n=t.cart.item.books.map(function(t){return t.id}).indexOf(o);if(!(n<0)){T.debug("Found book to remove from cart");var e=t.cart.item.books.splice(n,1)[0];"object"===F()(p()(t,["cart","discount","books","harry"]))&&delete t.cart.discount.books.harry[e.id],t.cart.subTotal-=e.total}},DECREASE_BOOK_IN_CART:function(t,o){var n=t.cart.item.books.map(function(t){return t.id}).indexOf(o),r=t.cart.item.books[n];!r||r.amount<2||(r.amount-=1,r.total-=r.price,e.a.set(t.cart.item.books,n,r),t.cart.subTotal-=r.price)},INCREASE_BOOK_IN_CART:function(t,o){var n=t.cart.item.books.map(function(t){return t.id}).indexOf(o),r=t.cart.item.books[n];r&&(r.amount+=1,r.total+=r.price,e.a.set(t.cart.item.books,n,r),t.cart.subTotal+=r.price)},EDIT_BOOK_CART:function(t,o){},CLEAR_CART:function(t){t.cart={item:{books:[]},subTotal:0,total:0,change:0,cash:0,discount:{books:{harry:{}},amount:0}}},CALCULATE_DISCOUNT:function(t){var o=t.cart,n=o.subTotal,e=o.discount.books.harry;if(e&&"object"===(void 0===e?"undefined":F()(e))){var r=I()(e),a=r.reduce(function(t,o){return t+e[o]},0),c=0;r.length>0&&(c=a*(U[r.length-1]/100));var i=n-c;t.cart.total=i,t.cart.discount.amount=c}},UPDATE_CHANGE:function(t,o){t.cart.change=o},UPDATE_CASH:function(t,o){t.cart.cash=o}}};e.a.use(r.a);o.a=new r.a.Store({modules:{products:B,carts:N}})},NHnr:function(t,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=n("/5sW"),r=n("7VfX"),a=n.n(r),c=(n("8cFf"),{render:function(){var t=this.$createElement,o=this._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},staticRenderFns:[]});var i=n("VU/8")({name:"App"},c,!1,function(t){n("BEqM")},null,null).exports,u=n("YaEn"),s=n("IcnI");e.a.config.productionTip=!1,e.a.use(a.a),new e.a({el:"#app",router:u.a,store:s.a,render:function(t){return t(i)}})},YaEn:function(t,o,n){"use strict";var e=n("/5sW"),r=n("/ocq");e.a.use(r.a);var a=[{path:"/",name:"HomeView",component:function(){return Promise.all([n.e(1),n.e(0)]).then(n.bind(null,"j7e0"))}},{path:"/payment",name:"PaymentView",component:function(){return Promise.all([n.e(2),n.e(0)]).then(n.bind(null,"TxOz"))}},{path:"/thank-you",name:"ThankYouView",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"Rb0S"))}}];o.a=new r.a({mode:"history",routes:a})}},["NHnr"]);
//# sourceMappingURL=app.e68b4bed2430b94f8406.js.map